<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


{{>adminNavbar}}
<section class=" admin-section d-flex gap-5">
    {{>adminSideBar}}
    <div class="vw-100 main px-5 pt-5 content-admin ">


        <div class="row container mb-5">
            <div class="col-md-7 col-12 p-3 m-auto" style="background-color: #ddddddc9;">

                <form id="edit-coupon-form" class="bg-light p-5">
                    <h1 class="text-center mb-3">Edit Coupon</h1>
                    <input type="text" value="{{Coupon._id}}" name="couponid" hidden>
                    <div class="form-group mb-3">
                        <label for="code">Coupon Code:</label>
                        <input type="text" id="code" name="code" value="{{Coupon.code}}" class="form-control"
                            onblur="javascript:value=value.replace(/\s/g,'');" required>
                    </div>

                    <div class="form-group mb-3">
                        <label for="discount">Discount:</label>
                        <input type="number" id="discount" name="discount" value="{{Coupon.discount}}"
                            class="form-control" onblur="javascript:value=value.replace(/\s/g,'');" required>
                    </div>

                    <div class="form-group mb-3">
                        <label for="expiration-date">Expiration Date:</label>
                        <input type="date" id="expiration-date" name="expirationDate" value="{{Date}}"
                            class="form-control" onblur="javascript:value=value.replace(/\s/g,'');" required>
                    </div>

                    <div class="form-group mb-3">
                        <label for="max-amount">Max amount:</label>
                        <input type="number" id="max-amount" name="maxDiscount" value="{{Coupon.max_discount}}"
                            class="form-control" onblur="javascript:value=value.replace(/\s/g,'');" required>
                    </div>

                    <div class="form-group mb-3">
                        <label for="min-amount">Min amount:</label>
                        <input type="number" id="min-amount" name="minAmount" value="{{Coupon.min_amount}}"
                            class="form-control" onblur="javascript:value=value.replace(/\s/g,'');" required>
                    </div>

                    <div class="form-group text-center mt-4">
                        <button type="submit" class="btn btn-outline-dark b-radius">Edit Coupon</button>
                    </div>
                </form>
            </div>
        </div>



</section>

<script>
    $("#edit-coupon-form").submit(function (e) {
        e.preventDefault();
        alert($(this).serialize())
        $.ajax({
            url: "/admin/saveEditedCoupon",
            method: "POST",
            data: $(this).serialize(),
            success: function (response) {
                if (response.status) {
                    location.href="/admin/addCoupons"
                }
                else {
                    swal("Failed!", "error");
                }
            },

        });

    })
</script>